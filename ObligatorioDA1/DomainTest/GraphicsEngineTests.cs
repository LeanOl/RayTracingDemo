using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.Collections.Generic;
using System.Drawing;
using Domain;

namespace DomainTest
{
    [TestClass]
    public class GraphicsEngineTests
    {
        [TestMethod]
        public void CreateGraphicsEngineDefaultValuesOk()
        {
            GraphicsEngine engine = new GraphicsEngine();
            Assert.IsNotNull(engine);
            Assert.AreEqual(300, engine.Resolution);
            Assert.AreEqual(50, engine.SamplesPerPixel);
            Assert.AreEqual(20,engine.MaxDepth);
        }

        [TestMethod]
        public void GraphicsEngineResolutionLessThan1_Exception()
        {
            GraphicsEngine engine = new GraphicsEngine();
            Assert.ThrowsException<ArgumentOutOfRangeException>(() => engine.Resolution = 0);
        }
        [TestMethod]
        public void GraphicsEngineSamplesPerPixelLessThan1_Exception()
        {
            GraphicsEngine engine = new GraphicsEngine();
            Assert.ThrowsException<ArgumentOutOfRangeException>(() => engine.SamplesPerPixel = 0);
        }

        [TestMethod]
        public void GraphicsEngineMaxDepthLessThan1_Exception()
        {
            GraphicsEngine engine = new GraphicsEngine();
            Assert.ThrowsException<ArgumentOutOfRangeException>(() => engine.MaxDepth = 0);
        }

        [TestMethod]
        public void ObtainColorSuccessfully()
        {
            Material aLamberitan = new Lambertian { Color = Color.FromArgb(25, 51, 127) };
            Figure aSphere = new Sphere { Radius = 0.5m};
            Model aModel=new Model { Figure=aSphere,Material=aLamberitan};
            PositionedModel aPositionedModel=new PositionedModel { Model=aModel,Position=new Vector { X=0,Y=0.5m,Z=-2}};
            List<PositionedModel> elements = new List<PositionedModel>
            {
                aPositionedModel
            };
            GraphicsEngine engine = new GraphicsEngine();
            Ray ray = new Ray{Origin=new Vector{X=4,Y=2,Z=8},Direction=new Vector{X=-0.37470m,Y=-0.09534m,Z=-0.92324m}};

            Color color = engine.ObtainColor(ray,2,elements);
            Assert.IsNotNull(color);
            int tolerance=10;
            Assert.IsTrue(Math.Abs(color.R - 13) < tolerance);
            Assert.IsTrue(Math.Abs(color.G - 36) < tolerance);
            Assert.IsTrue(Math.Abs(color.B - 127) < tolerance);
        }
        [TestMethod]
        public void RenderSceneSuccessfully()
        {
            Material aLamberitan = new Lambertian { Color = Color.FromArgb(178, 178, 25) };
            Figure aSphere = new Sphere { Radius = 2000 };
            Model aModel = new Model { Figure = aSphere, Material = aLamberitan };
            PositionedModel aPositionedModel = new PositionedModel { Model = aModel, Position = new Vector { X = 0, Y = -2000m, Z = -1 } };
            List<PositionedModel> elements = new List<PositionedModel>
            {
                aPositionedModel
            };
            Camera testCamera = new Camera();
            Scene testScene= new Scene { ModelList= elements,Camera = testCamera};
            
            GraphicsEngine engine = new GraphicsEngine{MaxDepth = 3,Resolution = 45,SamplesPerPixel = 10};
            Bitmap bitmap = engine.RenderScene(testScene);
            Bitmap expectedBitmap = GraphicsEngine.PpmToBitmap(expectedPpm);
            double acceptedDifference=1000;
            Assert.IsTrue(BitmapCompare(bitmap, expectedBitmap) < acceptedDifference); ;
        }

        private string expectedPpm = "P3\r\n45 30\r\n255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 207 255\r\n176 208 255\r\n176 207 255\r\n176 207 255\r\n176 207 255\r\n176 207 255\r\n176 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n175 207 255\r\n176 207 255\r\n175 207 255\r\n176 207 255\r\n176 207 255\r\n176 207 255\r\n176 207 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n176 208 255\r\n177 208 255\r\n176 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n176 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n177 208 255\r\n178 209 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n177 208 255\r\n178 209 255\r\n177 208 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n179 210 255\r\n179 210 255\r\n179 210 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n178 209 255\r\n179 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n179 209 255\r\n178 209 255\r\n178 209 255\r\n179 209 255\r\n178 209 255\r\n178 209 255\r\n178 209 255\r\n179 209 255\r\n179 209 255\r\n178 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 209 255\r\n179 210 255\r\n179 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n179 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n179 210 255\r\n179 210 255\r\n180 210 255\r\n179 210 255\r\n179 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n179 210 255\r\n179 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n180 210 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 210 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n180 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n180 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n181 210 255\r\n181 211 255\r\n181 211 255\r\n181 210 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n181 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n182 211 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n183 212 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 212 255\r\n184 213 255\r\n184 212 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n184 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n185 213 255\r\n186 214 255\r\n187 214 255\r\n187 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n186 214 255\r\n187 214 255\r\n188 215 255\r\n187 214 255\r\n188 215 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n188 215 255\r\n187 214 255\r\n187 214 255\r\n188 215 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n187 214 255\r\n189 215 255\r\n189 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n189 215 255\r\n189 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n189 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n189 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n188 215 255\r\n189 215 255\r\n188 215 255\r\n189 215 255\r\n189 215 255\r\n188 215 255\r\n189 215 255\r\n189 215 255\r\n188 215 255\r\n189 215 255\r\n189 215 255\r\n189 215 255\r\n188 215 255\r\n189 215 255\r\n188 215 255\r\n189 215 255\r\n189 215 255\r\n189 215 255\r\n189 215 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n189 216 255\r\n190 216 255\r\n190 216 255\r\n189 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n189 216 255\r\n190 216 255\r\n189 216 255\r\n189 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n189 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n189 216 255\r\n190 216 255\r\n190 216 255\r\n189 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n190 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 217 255\r\n191 216 255\r\n191 217 255\r\n191 216 255\r\n191 216 255\r\n191 217 255\r\n191 217 255\r\n191 216 255\r\n191 216 255\r\n191 217 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 217 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 217 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n191 216 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n192 217 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n193 218 255\r\n165 192 186\r\n157 184 163\r\n165 192 186\r\n164 191 186\r\n144 173 140\r\n154 182 163\r\n164 191 186\r\n147 175 140\r\n166 192 186\r\n184 209 232\r\n154 182 163\r\n145 174 140\r\n174 200 209\r\n117 148 71\r\n169 194 186\r\n145 174 140\r\n184 209 232\r\n135 165 117\r\n146 174 140\r\n148 175 140\r\n147 175 140\r\n125 156 94\r\n146 174 140\r\n154 182 163\r\n138 167 117\r\n146 174 140\r\n167 193 186\r\n136 165 117\r\n144 173 140\r\n127 157 94\r\n146 174 140\r\n153 182 163\r\n154 182 163\r\n155 183 163\r\n148 175 140\r\n146 174 140\r\n173 200 209\r\n173 200 209\r\n144 173 140\r\n155 183 163\r\n176 202 209\r\n175 201 209\r\n136 165 117\r\n174 200 209\r\n174 201 209\r\n101 132 25\r\n95 128 25\r\n99 131 25\r\n99 131 25\r\n101 132 25\r\n95 128 25\r\n101 132 25\r\n97 130 25\r\n98 130 25\r\n100 131 25\r\n102 133 25\r\n105 135 25\r\n101 132 25\r\n96 129 25\r\n98 130 25\r\n98 130 25\r\n96 129 25\r\n97 129 25\r\n96 129 25\r\n100 131 25\r\n98 130 25\r\n96 129 25\r\n99 131 25\r\n100 131 25\r\n99 131 25\r\n95 128 25\r\n99 131 25\r\n99 131 25\r\n94 128 25\r\n96 129 25\r\n96 129 25\r\n97 130 25\r\n98 130 25\r\n94 128 25\r\n102 132 25\r\n99 131 25\r\n97 130 25\r\n95 129 25\r\n99 131 25\r\n97 130 25\r\n96 129 25\r\n99 131 25\r\n97 129 25\r\n97 130 25\r\n102 132 25\r\n99 131 25\r\n96 129 25\r\n102 132 25\r\n96 129 25\r\n98 130 25\r\n98 130 25\r\n102 132 25\r\n100 131 25\r\n101 132 25\r\n98 130 25\r\n98 130 25\r\n97 130 25\r\n99 131 25\r\n99 131 25\r\n98 130 25\r\n97 129 25\r\n100 132 25\r\n98 130 25\r\n100 131 25\r\n101 132 25\r\n99 131 25\r\n97 129 25\r\n103 133 25\r\n96 129 25\r\n97 130 25\r\n101 132 25\r\n95 128 25\r\n96 129 25\r\n97 130 25\r\n98 130 25\r\n95 128 25\r\n97 130 25\r\n99 131 25\r\n96 129 25\r\n100 132 25\r\n99 131 25\r\n101 132 25\r\n98 130 25\r\n99 131 25\r\n97 129 25\r\n96 129 25\r\n96 129 25\r\n95 128 25\r\n96 129 25\r\n101 132 25\r\n94 128 25\r\n96 129 25\r\n102 132 25\r\n97 130 25\r\n98 130 25\r\n98 130 25\r\n98 130 25\r\n97 130 25\r\n100 131 25\r\n104 134 25\r\n97 130 25\r\n100 131 25\r\n98 130 25\r\n99 131 25\r\n96 129 25\r\n94 128 25\r\n97 130 25\r\n94 128 25\r\n97 130 25\r\n96 129 25\r\n101 132 25\r\n102 132 25\r\n95 129 25\r\n96 129 25\r\n96 129 25\r\n99 131 25\r\n97 129 25\r\n103 133 25\r\n98 130 25\r\n96 129 25\r\n98 130 25\r\n98 130 25\r\n101 132 25\r\n103 133 25\r\n99 131 25\r\n99 131 25\r\n97 130 25\r\n96 129 25\r\n97 130 25\r\n100 131 25\r\n95 128 25\r\n96 129 25\r\n99 131 25\r\n98 130 25\r\n100 131 25\r\n96 129 25\r\n101 132 25\r\n101 132 25\r\n98 130 25\r\n95 128 25\r\n94 128 25\r\n99 131 25\r\n96 129 25\r\n101 132 25\r\n98 130 25\r\n102 133 25\r\n100 131 25\r\n99 131 25\r\n102 133 25\r\n98 130 25\r\n98 130 25\r\n97 129 25\r\n99 131 25\r\n96 129 25\r\n96 129 25\r\n101 132 25\r\n100 131 25\r\n97 129 25\r\n102 133 25\r\n97 130 25\r\n99 131 25\r\n98 130 25\r\n101 132 25\r\n105 134 25\r\n98 130 25\r\n102 133 25\r\n96 129 25\r\n96 129 25\r\n96 129 25\r\n103 133 25\r\n98 130 25\r\n97 130 25\r\n100 131 25\r\n96 129 25\r\n101 132 25\r\n99 131 25\r\n98 130 25\r\n98 130 25\r\n98 130 25\r\n102 133 25\r\n97 130 25\r\n94 128 25\r\n100 131 25\r\n95 128 25\r\n98 130 25\r\n97 130 25\r\n98 130 25\r\n96 129 25\r\n102 133 25\r\n98 130 25\r\n98 130 25\r\n99 131 25\r\n97 129 25\r\n97 129 25\r\n101 132 25\r\n96 129 25\r\n101 132 25\r\n99 131 25\r\n95 129 25\r\n98 130 25\r\n98 130 25\r\n100 131 25\r\n103 133 25\r\n98 130 25\r\n97 129 25\r\n98 130 25\r\n99 131 25\r\n97 129 25\r\n100 131 25\r\n97 130 25\r\n101 132 25\r\n99 131 25\r\n94 128 25\r\n101 132 25\r\n101 132 25\r\n99 131 25\r\n99 131 25\r\n99 131 25\r\n96 129 25\r\n96 129 25\r\n101 132 25\r\n101 132 25\r\n96 129 25\r\n98 130 25\r\n99 131 25\r\n98 130 25\r\n97 130 25\r\n96 129 25\r\n99 131 25\r\n103 133 25\r\n100 131 25\r\n97 130 25\r\n99 131 25\r\n103 133 25\r\n98 130 25\r\n101 132 25\r\n103 133 25\r\n104 134 25\r\n97 129 25\r\n98 130 25\r\n97 130 25\r\n95 128 25\r\n99 131 25\r\n97 129 25\r\n97 130 25\r\n98 130 25\r\n97 130 25\r\n95 129 25\r\n98 130 25\r\n94 128 25\r\n98 130 25\r\n101 132 25\r\n97 130 25\r\n98 130 25\r\n106 135 25\r\n96 129 25\r\n97 130 25\r\n98 130 25\r\n101 132 25\r\n99 131 25\r\n98 130 25\r\n99 131 25\r\n97 130 25\r\n95 129 25\r\n94 128 25\r\n100 131 25\r\n98 130 25\r\n96 129 25\r\n100 132 25\r\n97 129 25\r\n98 130 25\r\n99 131 25\r\n101 132 25\r\n100 131 25\r\n100 131 25\r\n101 132 25\r\n97 130 25\r\n95 129 25\r\n97 130 25\r\n98 130 25\r\n99 131 25\r\n101 132 25\r\n95 128 25\r\n98 130 25\r\n97 130 25\r\n97 129 25\r\n100 132 25\r\n99 131 25\r\n98 130 25\r\n95 129 25\r\n101 132 25\r\n103 133 25\r\n100 131 25\r\n100 131 25\r\n101 132 25\r\n96 129 25\r\n95 128 25\r\n96 129 25\r\n98 130 25\r\n94 128 25\r\n95 128 25\r\n97 129 25\r\n95 129 25\r\n102 133 25\r\n100 131 25\r\n97 129 25\r\n98 130 25\r\n96 129 25\r\n100 131 25\r\n101 132 25\r\n95 129 25\r\n96 129 25\r\n100 131 25\r\n99 131 25\r\n97 129 25\r\n97 130 25\r\n96 129 25\r\n100 132 25\r\n97 130 25\r\n98 130 25\r\n100 132 25\r\n97 129 25\r\n95 128 25\r\n101 132 25\r\n95 128 25\r\n100 131 25\r\n102 133 25\r\n97 129 25\r\n99 131 25\r\n96 129 25\r\n98 130 25\r\n98 130 25\r\n96 129 25\r\n96 129 25\r\n99 131 25\r\n99 131 25\r\n99 131 25\r\n97 130 25\r\n93 127 25\r\n97 130 25\r\n98 130 25\r\n99 131 25\r\n95 128 25\r\n99 131 25\r\n98 130 25\r\n101 132 25\r\n102 133 25\r\n101 132 25\r\n101 132 25\r\n98 130 25\r\n101 132 25\r\n98 130 25\r\n99 131 25\r\n97 129 25\r\n100 132 25\r\n101 132 25\r\n97 130 25\r\n103 133 25\r\n101 132 25\r\n97 129 25\r\n96 129 25\r\n98 130 25\r\n98 130 25\r\n95 128 25\r\n99 131 25\r\n104 134 25\r\n96 129 25\r\n98 130 25\r\n97 130 25\r\n100 131 25\r\n96 129 25\r\n107 136 25\r\n99 131 25\r\n95 129 25\r\n100 132 25\r\n99 131 25\r\n98 130 25\r\n96 129 25\r\n99 131 25\r\n101 132 25\r\n98 130 25\r\n96 129 25\r\n96 129 25\r\n99 131 25\r\n94 128 25\r\n97 129 25\r\n97 130 25\r\n98 130 25\r\n100 132 25\r\n97 130 25\r\n102 132 25\r\n95 128 25\r\n101 132 25\r\n100 132 25\r\n96 129 25\r\n100 132 25\r\n104 134 25\r\n104 134 25\r\n102 133 25\r\n98 130 25\r\n95 129 25\r\n94 128 25\r\n99 131 25\r\n97 130 25\r\n98 130 25\r\n96 129 25\r\n97 130 25\r\n96 129 25\r\n96 129 25\r\n100 132 25\r\n97 130 25\r\n98 130 25\r\n99 131 25\r\n96 129 25\r\n98 130 25\r\n100 132 25\r\n100 132 25\r\n97 129 25\r\n99 131 25\r\n101 132 25\r\n96 129 25\r\n96 129 25\r\n98 130 25\r\n100 131 25\r\n99 131 25\r\n96 129 25\r\n101 132 25\r\n95 128 25\r\n101 132 25\r\n97 129 25\r\n98 130 25\r\n94 128 25\r\n94 128 25\r\n103 133 25\r\n104 134 25\r\n97 129 25\r\n100 132 25\r\n99 131 25\r\n96 129 25\r\n96 129 25\r\n94 128 25\r\n97 130 25\r\n98 130 25\r\n96 129 25\r\n97 130 25\r\n98 130 25\r\n96 129 25\r\n99 131 25\r\n100 131 25\r\n101 132 25\r\n95 128 25\r\n105 134 25\r\n98 130 25\r\n94 128 25\r\n101 132 25\r\n100 131 25\r\n95 128 25\r\n96 129 25\r\n97 130 25\r\n102 133 25\r\n97 130 25\r\n101 132 25\r\n99 131 25\r\n100 132 25\r\n101 132 25\r\n98 130 25\r\n96 129 25\r\n102 133 25\r\n101 132 25\r\n99 131 25\r\n96 129 25\r\n102 132 25\r\n101 132 25\r\n98 130 25\r\n99 131 25\r\n99 131 25\r\n98 130 25\r\n102 133 25\r\n94 128 25\r\n98 130 25\r\n99 131 25\r\n98 130 25\r\n98 130 25\r\n97 129 25\r\n103 133 25\r\n100 131 25\r\n100 132 25\r\n95 128 25\r\n99 131 25\r\n101 132 25\r\n98 130 25\r\n98 130 25\r\n97 129 25\r\n96 129 25\r\n99 131 25\r\n95 129 25\r\n100 131 25\r\n98 130 25\r\n99 131 25\r\n102 133 25\r\n101 132 25\r\n96 129 25\r\n105 134 25\r\n104 134 25\r\n102 133 25\r\n96 129 25\r\n97 130 25\r\n95 129 25\r\n96 129 25\r\n98 130 25\r\n98 130 25\r\n96 129 25\r\n98 130 25\r\n101 132 25\r\n98 130 25\r\n94 128 25\r\n99 131 25\r\n98 130 25\r\n93 127 25\r\n95 128 25\r\n96 129 25\r\n93 127 25\r\n97 130 25\r\n99 131 25\r\n97 130 25\r\n104 134 25\r\n99 131 25\r\n99 131 25\r\n95 129 25\r\n102 132 25\r\n99 131 25\r\n99 131 25\r\n98 130 25\r\n96 129 25\r\n101 132 25\r\n101 132 25\r\n104 134 25\r\n98 130 25\r\n100 131 25\r\n99 131 25";
       
        double BitmapCompare(Bitmap bmp1, Bitmap bmp2)
            {
                if (bmp1.Width != bmp2.Width || bmp1.Height != bmp2.Height)
                    throw new ArgumentException("Bitmaps are not of equal dimensions.");

                double mse = 0;
                for (int i = 0; i < bmp1.Width; i++)
                {
                    for (int j = 0; j < bmp1.Height; j++)
                    {
                        Color pixel1 = bmp1.GetPixel(i, j);
                        Color pixel2 = bmp2.GetPixel(i, j);

                        mse += Math.Pow(pixel1.R - pixel2.R, 2);
                        mse += Math.Pow(pixel1.G - pixel2.G, 2);
                        mse += Math.Pow(pixel1.B - pixel2.B, 2);
                    }
                }

                mse /= (bmp1.Width * bmp1.Height * 3);
                return mse;
            }
        }
    



}
